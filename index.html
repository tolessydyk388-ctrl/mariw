<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>MARI ‚Äî –ó–∞–∫–∞–∑ –µ–¥—ã</title>

<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&display=swap" rel="stylesheet">

<style>
:root {
  --bg-main:#F6F4F1;
  --bg-card:#FFFFFF;
  --accent:#B89B7C;
  --accent-hover:#A88A6A;
  --text:#2E2E2E;
  --radius:16px;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Cormorant Garamond',serif;
  background:var(--bg-main);
  color:var(--text);
}

.hidden{display:none}

.card{
  background:var(--bg-card);
  border-radius:var(--radius);
  padding:24px;
  box-shadow:0 6px 20px rgba(0,0,0,.05);
}

.pc-select{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:16px;
}

select,textarea,button{
  width:100%;
  padding:14px;
  border-radius:var(--radius);
  border:1px solid #ddd;
  font-size:18px;
  font-family:inherit;
}

button{
  background:var(--accent);
  color:#fff;
  border:none;
  cursor:pointer;
  transition:.25s;
}
button:hover{background:var(--accent-hover)}

.container{max-width:520px;margin:0 auto;padding:16px}

.menu-row{
  background:#fff;
  border-radius:14px;
  padding:12px;
  margin-bottom:10px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  animation:pop .35s forwards;
}
.menu-name{font-style:italic}

@keyframes pop{
  from{opacity:0;transform:scale(.9)}
  to{opacity:1;transform:scale(1)}
}

.cart-btn{
  position:fixed;
  right:16px;
  bottom:16px;
  width:56px;
  height:56px;
  border-radius:50%;
  background:var(--accent);
  color:#fff;
  font-size:24px;
  display:flex;
  justify-content:center;
  align-items:center;
  box-shadow:0 4px 14px rgba(0,0,0,.25);
  z-index:10;
}

.cart-count{
  position:absolute;
  top:-6px;
  right:-6px;
  background:red;
  color:#fff;
  width:20px;
  height:20px;
  border-radius:50%;
  font-size:12px;
  display:flex;
  justify-content:center;
  align-items:center;
}

.cart-panel{
  position:fixed;
  top:0;
  right:0;
  width:90%;
  max-width:400px;
  height:100%;
  background:#fff;
  padding:16px;
  transform:translateX(100%);
  transition:.4s;
  z-index:20;
  display:flex;
  flex-direction:column;
}
.cart-panel.open{transform:translateX(0)}

.cart-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:6px;
  animation:pop .25s forwards;
}

.cart-item button{
  width:20px;
  height:20px;
  background:red;
  border-radius:4px;
  font-size:12px;
  padding:0;
}

.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:30;
}
.overlay.show{display:flex}

.success{
  background:#fff;
  padding:28px;
  border-radius:16px;
  text-align:center;
  animation:pop .4s forwards;
}
</style>
</head>

<body>

<!-- –®–ê–ì 1 -->
<div id="stepPc" class="pc-select">
  <div class="card">
    <h2>MARI coffee & terrace</h2>
    <p>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–º–µ—Ä –ü–ö</p>
    <select id="pcNumber"></select>
    <button style="margin-top:14px" onclick="goToMenu()">–ü–µ—Ä–µ–π—Ç–∏ –∫ –º–µ–Ω—é</button>
  </div>
</div>

<!-- –®–ê–ì 2 -->
<div id="stepMenu" class="hidden">
  <div class="container">
    <h2>–ú–µ–Ω—é ¬∑ –ü–ö ‚Ññ <span id="pcLabel"></span></h2>
    <div id="menu"></div>
  </div>
</div>

<!-- –ö–û–†–ó–ò–ù–ê -->
<button class="cart-btn" onclick="toggleCart()">üõí
  <div class="cart-count" id="cartCount">0</div>
</button>

<div class="cart-panel" id="cartPanel">
  <strong>–ö–æ—Ä–∑–∏–Ω–∞</strong>
  <div id="cartItems" style="flex:1;overflow:auto;margin:10px 0"></div>
  <textarea id="comment" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"></textarea>
  <button style="margin-top:10px" onclick="sendOrder()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
</div>

<!-- –£–°–ü–ï–• -->
<div class="overlay" id="overlay">
  <div class="success">
    <h2>–ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç</h2>
    <p>–û–∂–∏–¥–∞–π—Ç–µ –¥–æ—Å—Ç–∞–≤–∫—É</p>
    <button onclick="location.reload()">–ù–æ–≤—ã–π –∑–∞–∫–∞–∑</button>
  </div>
</div>

<script>
const pcSelect = document.getElementById('pcNumber');
for (let i = 1; i <= 40; i++) {
  pcSelect.innerHTML += `<option value="${i}">–ü–ö ${i}</option>`;
}

const menuData = [
  {name:'–≠—Å–ø—Ä–µ—Å—Å–æ 30 –º–ª',price:1290},
  {name:'–ê–º–µ—Ä–∏–∫–∞–Ω–æ 230 –º–ª',price:1590},
  {name:'–ö–∞–ø—É—á–∏–Ω–æ 230 –º–ª',price:1990},
  {name:'–õ–∞—Ç—Ç–µ 340 –º–ª',price:2290},
  {name:'–†–∞—Ñ 240 –º–ª',price:2290},
  {name:'–ë–∞—Ç—á –±—Ä—é 240 –º–ª',price:1990},
  {name:'–í–∞–Ω–∏–ª—å–Ω—ã–π –ª–∞—Ç—Ç–µ 350 –º–ª',price:2490},
  {name:'–ú–∞—Ç—á–∞ –∫–æ–∫–æ –ª–∞—Ç—Ç–µ 350 –º–ª',price:2490},
  {name:'Borjomi 330 –º–ª',price:3190},
  {name:'Coca-Cola 250 –º–ª',price:1290},
  {name:'Red Bull 250 –º–ª',price:2390},
  {name:'–ú–µ–¥–æ–≤–∏–∫',price:2590},
  {name:'–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —á–∏–∑–∫–µ–π–∫',price:3290},
  {name:'Mojito 300 –º–ª',price:2490}
];

const cart = [];

function goToMenu() {
  document.getElementById('stepPc').classList.add('hidden');
  document.getElementById('stepMenu').classList.remove('hidden');
  document.getElementById('pcLabel').innerText = pcSelect.value;
  renderMenu();
}

function renderMenu() {
  const box = document.getElementById('menu');
  box.innerHTML = '';
  menuData.forEach(item => {
    const row = document.createElement('div');
    row.className = 'menu-row';
    row.innerHTML = `
      <span class="menu-name">${item.name}</span>
      <div>
        ${item.price} ‚Ç∏
        <button onclick="addToCart('${item.name}', ${item.price})">Ôºã</button>
      </div>`;
    box.appendChild(row);
  });
}

function addToCart(name, price) {
  cart.push({ name, price });
  renderCart();
}

function renderCart() {
  const box = document.getElementById('cartItems');
  box.innerHTML = '';
  let sum = 0;

  cart.forEach((item, index) => {
    sum += item.price;
    box.innerHTML += `
      <div class="cart-item">
        <span>${item.name}</span>
        <span>${item.price} ‚Ç∏ 
          <button onclick="removeFromCart(${index})">‚úï</button>
        </span>
      </div>`;
  });

  box.innerHTML += `<strong>–ò—Ç–æ–≥–æ: ${sum} ‚Ç∏</strong>`;
  document.getElementById('cartCount').innerText = cart.length;
}

function removeFromCart(index) {
  cart.splice(index, 1);
  renderCart();
}

function toggleCart() {
  document.getElementById('cartPanel').classList.toggle('open');
}

function sendOrder() {
  if (!cart.length) {
    alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞');
    return;
  }

  fetch('https://script.google.com/macros/s/AKfycbwUf4ivkksaNwsq6AliAYCHdeqQASZeKVUZ1SE8ZTOZNUK56NA8a-26Chb0ypsP2kcxgw/exec', {
    method: 'POST',
    body: JSON.stringify({
      pc: pcSelect.value,
      items: cart.map(i => i.name).join(', '),
      sum: cart.reduce((a, b) => a + b.price, 0),
      comment: document.getElementById('comment').value
    })
  })
  .then(() => {
    document.getElementById('overlay').classList.add('show');
    cart.length = 0;
    renderCart();
  })
  .catch(err => {
    alert('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞');
    console.error(err);
  });
}
</script>


</body>
</html>
